{"version":3,"file":"hooks.server-CmIcolvg.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import { I as IS_DEV } from \"./index3.js\";\nconst authenticateUser = (event) => {\n  const meFromCookie = event.cookies.get(\"me\");\n  const tokenFromCookie = event.cookies.get(\"auth.tk\");\n  if (meFromCookie && meFromCookie != \"undefined\" && tokenFromCookie && tokenFromCookie != \"undefined\") {\n    const me = JSON.parse(meFromCookie);\n    return {\n      username: me.username,\n      role: me.role,\n      name: me.name,\n      email: me.email,\n      phone: me.phone,\n      role: me.role,\n      status: me.status\n    };\n  } else {\n    return null;\n  }\n};\nasync function handle({ event, resolve }) {\n  const url = new URL(event.request.url);\n  const host = url.host;\n  const protocol = !IS_DEV ? `https://` : `http://`;\n  event.locals.origin = protocol + host;\n  event.locals.host = url.host;\n  event.locals.me = await authenticateUser(event);\n  event.locals.token = event.cookies.get(\"auth.tk\");\n  const response = await resolve(event);\n  return response;\n}\nexport {\n  handle\n};\n"],"names":[],"mappings":";;;AACA,MAAM,gBAAgB,GAAG,CAAC,KAAK,KAAK;AACpC,EAAE,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAC/C,EAAE,MAAM,eAAe,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACvD,EAAE,IAAI,YAAY,IAAI,YAAY,IAAI,WAAW,IAAI,eAAe,IAAI,eAAe,IAAI,WAAW,EAAE;AACxG,IAAI,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AACxC,IAAI,OAAO;AACX,MAAM,QAAQ,EAAE,EAAE,CAAC,QAAQ;AAC3B,MAAM,IAAI,EAAE,EAAE,CAAC,IAAI;AACnB,MAAM,IAAI,EAAE,EAAE,CAAC,IAAI;AACnB,MAAM,KAAK,EAAE,EAAE,CAAC,KAAK;AACrB,MAAM,KAAK,EAAE,EAAE,CAAC,KAAK;AACrB,MAAM,IAAI,EAAE,EAAE,CAAC,IAAI;AACnB,MAAM,MAAM,EAAE,EAAE,CAAC,MAAM;AACvB,KAAK,CAAC;AACN,GAAG,MAAM;AACT,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG;AACH,CAAC,CAAC;AACF,eAAe,MAAM,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;AAC1C,EAAE,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACzC,EAAE,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AACxB,EAAE,MAAM,QAAQ,GAAG,CAAC,MAAM,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACpD,EAAE,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,GAAG,IAAI,CAAC;AACxC,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AAC/B,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,MAAM,gBAAgB,CAAC,KAAK,CAAC,CAAC;AAClD,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACpD,EAAE,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC;AACxC,EAAE,OAAO,QAAQ,CAAC;AAClB;;;;"}