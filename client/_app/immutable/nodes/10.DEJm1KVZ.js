import{s as $,e as x,a as R,c as N,b as I,l as q,g as L,f as T,m as v,i as F,h as b,x as H,y as B,z as ee,p as te,n as K,r as ne,k as ae,t as X,d as Y,j as Z}from"../chunks/scheduler.Bm87nGqA.js";import{S as re,i as oe}from"../chunks/index.DcMJxoTv.js";import{e as ie}from"../chunks/forms.DIvzv1KR.js";import{p as se}from"../chunks/stores.BkMh60V4.js";import{g as ue,a as le}from"../chunks/entry.CB1J30oF.js";const fe=async({parent:u})=>{},Se=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));function me(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ce=function(u){function o(n){if(s[n])return s[n].exports;var r=s[n]={i:n,l:!1,exports:{}};return u[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var s={};return o.m=u,o.c=s,o.d=function(n,r,i){o.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:i})},o.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(r,"a",r),r},o.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},o.p="",o(o.s=0)}([function(u,o,s){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},r=s(1);u.exports=function(i,f){var S=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=(typeof document>"u"?"undefined":n(document))==="object"&&typeof document.cookie=="string",k=(i===void 0?"undefined":n(i))==="object"&&(f===void 0?"undefined":n(f))==="object"&&u!==void 0,h=!d&&!k||d&&k,c=function(t){if(k){var a=i.headers.cookie||"";return t&&(a=f.getHeaders(),a=a["set-cookie"]?a["set-cookie"].map(function(l){return l.split(";")[0]}).join(";"):""),a}if(d)return document.cookie||""},w=function(){var t=f.getHeader("Set-Cookie");return(t=typeof t=="string"?[t]:t)||[]},m=function(t){return f.setHeader("Set-Cookie",t)},E=function(t,a){if(!a)return t;try{return JSON.parse(t)}catch{return t}},e={parseJSON:S,set:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"};if(!h)if(a=(a===void 0?"undefined":n(a))==="object"?JSON.stringify(a):a,k){var p=w();p.push(r.serialize(t,a,l)),m(p)}else document.cookie=r.serialize(t,a,l)},setAll:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];h||Array.isArray(t)&&t.forEach(function(a){var l=a.name,p=l===void 0?"":l,O=a.value,P=O===void 0?"":O,j=a.opts,J=j===void 0?{path:"/"}:j;e.set(p,P,J)})},get:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fromRes:!1,parseJSON:e.parseJSON};if(h)return"";var l=r.parse(c(a.fromRes)),p=l[t];return E(p,a.parseJSON)},getAll:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{fromRes:!1,parseJSON:e.parseJSON};if(h)return{};var a=r.parse(c(t.fromRes));for(var l in a)a[l]=E(a[l],t.parseJSON);return a},remove:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{path:"/"};h||(a.expires=new Date(0),e.set(t,"",a))},removeAll:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{path:"/"};if(!h){var a=r.parse(c());for(var l in a)e.remove(l,t)}},nodeCookie:r};return e}},function(u,o,s){function n(h,c){if(typeof h!="string")throw new TypeError("argument str must be a string");for(var w={},m=c||{},E=h.split(d),e=m.decode||f,t=0;t<E.length;t++){var a=E[t],l=a.indexOf("=");if(!(l<0)){var p=a.substr(0,l).trim(),O=a.substr(++l,a.length).trim();O[0]=='"'&&(O=O.slice(1,-1)),w[p]==null&&(w[p]=i(O,e))}}return w}function r(h,c,w){var m=w||{},E=m.encode||S;if(typeof E!="function")throw new TypeError("option encode is invalid");if(!k.test(h))throw new TypeError("argument name is invalid");var e=E(c);if(e&&!k.test(e))throw new TypeError("argument val is invalid");var t=h+"="+e;if(m.maxAge!=null){var a=m.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");t+="; Max-Age="+Math.floor(a)}if(m.domain){if(!k.test(m.domain))throw new TypeError("option domain is invalid");t+="; Domain="+m.domain}if(m.path){if(!k.test(m.path))throw new TypeError("option path is invalid");t+="; Path="+m.path}if(m.expires){if(typeof m.expires.toUTCString!="function")throw new TypeError("option expires is invalid");t+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(t+="; HttpOnly"),m.secure&&(t+="; Secure"),m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:t+="; SameSite=Strict";break;case"lax":t+="; SameSite=Lax";break;case"strict":t+="; SameSite=Strict";break;case"none":t+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return t}function i(h,c){try{return c(h)}catch{return h}}/*!
* cookie
* Copyright(c) 2012-2014 Roman Shtylman
* Copyright(c) 2015 Douglas Christopher Wilson
* MIT Licensed
*/o.parse=n,o.serialize=r;var f=decodeURIComponent,S=encodeURIComponent,d=/; */,k=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/}]);const de=me(ce);function Q(u){var r;let o,s=((r=u[3])==null?void 0:r.username)+"",n;return{c(){o=x("p"),n=X(s),this.h()},l(i){o=N(i,"P",{class:!0});var f=I(o);n=Y(f,s),f.forEach(T),this.h()},h(){v(o,"class","mt-1 text-red-500")},m(i,f){F(i,o,f),b(o,n)},p(i,f){var S;f&8&&s!==(s=((S=i[3])==null?void 0:S.username)+"")&&Z(n,s)},d(i){i&&T(o)}}}function W(u){var r;let o,s=((r=u[3])==null?void 0:r.password)+"",n;return{c(){o=x("p"),n=X(s),this.h()},l(i){o=N(i,"P",{class:!0});var f=I(o);n=Y(f,s),f.forEach(T),this.h()},h(){v(o,"class","mt-1 text-red-500")},m(i,f){F(i,o,f),b(o,n)},p(i,f){var S;f&8&&s!==(s=((S=i[3])==null?void 0:S.password)+"")&&Z(n,s)},d(i){i&&T(o)}}}function pe(u){var M,V;let o,s,n,r,i,f="Username",S,d,k,h,c,w,m="Password",E,e,t,a,l,p,O="Submit",P,j,J,_=((M=u[3])==null?void 0:M.username)&&Q(u),y=((V=u[3])==null?void 0:V.password)&&W(u);return{c(){o=x("div"),s=x("form"),n=x("div"),r=x("div"),i=x("label"),i.textContent=f,S=R(),d=x("input"),k=R(),_&&_.c(),h=R(),c=x("div"),w=x("label"),w.textContent=m,E=R(),e=x("input"),t=R(),y&&y.c(),a=R(),l=x("div"),p=x("button"),p.textContent=O,this.h()},l(g){o=N(g,"DIV",{class:!0});var C=I(o);s=N(C,"FORM",{action:!0,method:!0,class:!0});var U=I(s);n=N(U,"DIV",{class:!0});var A=I(n);r=N(A,"DIV",{class:!0});var D=I(r);i=N(D,"LABEL",{for:!0,"data-svelte-h":!0}),q(i)!=="svelte-31xml"&&(i.textContent=f),S=L(D),d=N(D,"INPUT",{type:!0,name:!0,id:!0,class:!0}),k=L(D),_&&_.l(D),D.forEach(T),h=L(A),c=N(A,"DIV",{class:!0});var z=I(c);w=N(z,"LABEL",{for:!0,"data-svelte-h":!0}),q(w)!=="svelte-zd720i"&&(w.textContent=m),E=L(z),e=N(z,"INPUT",{type:!0,name:!0,id:!0,class:!0}),t=L(z),y&&y.l(z),z.forEach(T),a=L(A),l=N(A,"DIV",{class:!0});var G=I(l);p=N(G,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),q(p)!=="svelte-1gc02ml"&&(p.textContent=O),G.forEach(T),A.forEach(T),U.forEach(T),C.forEach(T),this.h()},h(){v(i,"for","name"),v(d,"type","text"),v(d,"name","username"),v(d,"id","username"),v(d,"class","form-control col-md-12"),d.required=!0,v(r,"class","form-group mt-2"),v(w,"for","name"),v(e,"type","password"),v(e,"name","password"),v(e,"id","password"),v(e,"class","form-control"),e.required=!0,v(c,"class","form-group mt-2"),v(p,"type","submit"),v(p,"class","btn btn-primary"),v(l,"class","form-group mt-2"),v(n,"class","row"),v(s,"action","/auth/login?/login"),v(s,"method","POST"),v(s,"class","form"),v(o,"class","form-box")},m(g,C){F(g,o,C),b(o,s),b(s,n),b(n,r),b(r,i),b(r,S),b(r,d),H(d,u[1]),b(r,k),_&&_.m(r,null),b(n,h),b(n,c),b(c,w),b(c,E),b(c,e),H(e,u[2]),b(c,t),y&&y.m(c,null),b(n,a),b(n,l),b(l,p),j||(J=[B(d,"input",u[6]),B(e,"input",u[7]),B(p,"click",u[8]),ee(P=ie.call(null,s,u[9]))],j=!0)},p(g,[C]){var U,A;C&2&&d.value!==g[1]&&H(d,g[1]),(U=g[3])!=null&&U.username?_?_.p(g,C):(_=Q(g),_.c(),_.m(r,null)):_&&(_.d(1),_=null),C&4&&e.value!==g[2]&&H(e,g[2]),(A=g[3])!=null&&A.password?y?y.p(g,C):(y=W(g),y.c(),y.m(c,null)):y&&(y.d(1),y=null),P&&te(P.update)&&C&9&&P.update.call(null,g[9])},i:K,o:K,d(g){g&&T(o),_&&_.d(),y&&y.d(),j=!1,ne(J)}}}function ve(u,o,s){var E;let n;ae(u,se,e=>s(10,n=e));const r=de();let i,f="",S="",d=null,k=(E=n==null?void 0:n.url)==null?void 0:E.searchParams.get("ref");function h(){f=this.value,s(1,f)}function c(){S=this.value,s(2,S)}return[i,f,S,d,r,k,h,c,()=>s(3,d=null),()=>(s(0,i=null),async({result:e})=>{var t,a,l,p,O,P,j,J,_,y,M,V,g,C;if((e==null?void 0:e.status)===200&&(e!=null&&e.data)){const U={name:(a=(t=e==null?void 0:e.data)==null?void 0:t.data)==null?void 0:a.name,email:(p=(l=e==null?void 0:e.data)==null?void 0:l.data)==null?void 0:p.email,phone:(P=(O=e==null?void 0:e.data)==null?void 0:O.data)==null?void 0:P.phone,username:(J=(j=e==null?void 0:e.data)==null?void 0:j.data)==null?void 0:J.username,role:(y=(_=e==null?void 0:e.data)==null?void 0:_.data)==null?void 0:y.role,status:(V=(M=e==null?void 0:e.data)==null?void 0:M.data)==null?void 0:V.status};r.set("me",U,{path:"/",maxAge:31536e3}),ue(k||"/dashboard"),await le(e)}else e!=null&&e.error&&(s(3,d=((g=e==null?void 0:e.error)==null?void 0:g.errors)||null),s(0,i=((C=e==null?void 0:e.error)==null?void 0:C.message)||null))})]}class we extends re{constructor(o){super(),oe(this,o,ve,pe,$,{})}}export{we as component,Se as universal};
